--CREATE DATABASE QLCuaHangSieuThi
--GO
--DROP DATABASE QLCuaHangSieuThi
--GO
USE QLCuaHangSieuThi
GO

CREATE TABLE HANGHOA(
	MaHangHoa VARCHAR(20) PRIMARY KEY NOT NULL,
	TenHang NVARCHAR(100)  NULL,
	DonVi NVARCHAR(100)  NULL,
	LoaiHang NVARCHAR(100)  NULL,
	SLTon INT ,
	GiaNiemYet FLOAT  NULL
)
GO

CREATE TABLE NHACUNGCAP(
	MaNCC VARCHAR(20) PRIMARY KEY NOT NULL,
	TenNCC NVARCHAR(100)  NULL,
	DiaChi NVARCHAR(100)  NULL,
	SDT INT ,
	Email NVARCHAR(100),
)
GO
CREATE TABLE NHANVIEN(
	MaNV VARCHAR(20) PRIMARY KEY NOT NULL,
	Ten NVARCHAR(100)  NULL,
	NgaySinh DATE  NULL,
	DiaChi NVARCHAR(100)  NULL,
	SDT INT ,
)
GO
CREATE TABLE PHIEUNHAPHANG(
	MaPhieu VARCHAR(20) PRIMARY KEY NOT NULL,
	MaNCC VARCHAR(20) FOREIGN KEY (MaNCC) REFERENCES NHACUNGCAP(MaNCC),
	NgayNhap DATE  NULL,
	MaNV VARCHAR(20) FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV),
)
GO
CREATE TABLE CT_PHIEUNHAPHANG(
	MaPhieu VARCHAR(20) FOREIGN KEY (MaPhieu) REFERENCES PHIEUNHAPHANG(MaPhieu),
	MaHangHoa VARCHAR(20) FOREIGN KEY (MaHangHoa) REFERENCES HANGHOA(MaHangHoa),
	SoLuong int ,
	DonGia money,
	DonViTinh nvarchar(20),
	HSD datetime,
	primary key(MaPhieu, MaHangHoa)
)
GO
CREATE TABLE CHUCVU(
	MaCV VARCHAR(20) PRIMARY KEY NOT NULL,
	TenCV NVARCHAR(100)  NULL,
	Luong FLOAT  NULL,
)
GO

CREATE TABLE LOAIKHACHHANG(
	MaLoaiKH VARCHAR(20) PRIMARY KEY NOT NULL,
	TenLoai NVARCHAR(100)  NULL,
	DieuKien NVARCHAR(100)  NULL,
)
GO

CREATE TABLE KHACHHANG(
	MaKH VARCHAR(20) PRIMARY KEY NOT NULL,
	MaLoaiKH VARCHAR(20) FOREIGN KEY (MaLoaiKH) REFERENCES LOAIKHACHHANG(MaLoaiKH),
	HoTen NVARCHAR(100)  NULL,
	SDT INT ,
	DiaChi NVARCHAR(100)  NULL,
	DiemTichLuy INT NULL,
	TongTienDaTieu money NULL
)
GO

CREATE TABLE HOADON(
	MaHoaDon VARCHAR(20) PRIMARY KEY NOT NULL,
	MaNV VARCHAR(20) FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV),
	MaKH VARCHAR(20) FOREIGN KEY (MaKH) REFERENCES KHACHHANG(MaKH),
	TongTien FLOAT NULL,
	NgayBan datetime,

)
GO
CREATE TABLE KHUYENMAI(
	MaKM VARCHAR(20) PRIMARY KEY NOT NULL,
	ChietKhau INT NOT NULL
)
GO
CREATE TABLE CT_KHUYENMAI(
	MaKM VARCHAR(20) FOREIGN KEY (MaKM) REFERENCES KHUYENMAI(MaKM),
	MaHangHoa VARCHAR(20) FOREIGN KEY (MaHangHoa) REFERENCES HANGHOA(MaHangHoa),
	NgayBatDau DATE NOT NULL,
	NgayKetThuc DATE NOT NULL,
)
GO

CREATE TABLE CHITIETHOADON(
	MaCTHD VARCHAR(20) PRIMARY KEY NOT NULL,
	MaHoaDon VARCHAR(20) FOREIGN KEY (MaHoaDon) REFERENCES HOADON(MaHoaDon),
	MaHangHoa VARCHAR(20) FOREIGN KEY (MaHangHoa) REFERENCES HANGHOA(MaHangHoa),
	MaKM VARCHAR(20) FOREIGN KEY (MaKM) REFERENCES KHUYENMAI(MaKM),
	SoLuong INT NOT NULL,
	ThanhTien FLOAT NULL
)	
GO

CREATE TABLE CT_CHUCVU(
	MaNV  VARCHAR(20) FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV),
	MaCV  VARCHAR(20) FOREIGN KEY (MaCV) REFERENCES CHUCVU(MaCV),
	NgayBatDau datetime,
	NgayKetThuc datetime
)	
GO
INSERT INTO HANGHOA VALUES('H01',N'Bánh Choco',N'hộp',N'Bánh kẹo','',35000)
INSERT INTO HANGHOA VALUES('H02',N'Coca Cola',N'non',N'Đồ uống','',12000)
INSERT INTO HANGHOA VALUES('H03',N'Bánh gạo',N'hộp',N'Bánh kẹo','',20000)
INSERT INTO HANGHOA VALUES('H04',N'Sữa chua',N'hộp',N'Đồ uống','',7000)
INSERT INTO HANGHOA VALUES('H05',N'Gạo',N'bao',N'Thực phẩm','',150000)
INSERT INTO HANGHOA VALUES('H06',N'Bim Bim',N'gói',N'Bánh kẹo','',9000)
INSERT INTO HANGHOA VALUES('H07',N'Bia 333',N'non',N'Đồ uống','',10000)
INSERT INTO HANGHOA VALUES('H08',N'Nồi cơm',N'chiếc',N'Đồ gia dụng','',560000)
INSERT INTO HANGHOA VALUES('H09',N'Kem đánh răng',N'chiếc',N'Đồ dùng hàng ngày','',25000)
INSERT INTO HANGHOA VALUES('H010',N'Bột ngọt',N'túi',N'Thực phẩm','',35000)
INSERT INTO HANGHOA VALUES('H011',N'Hạt nêm',N'túi',N'Thực phẩm','',50000)
INSERT INTO HANGHOA VALUES('H012',N'Dầu ăn',N'chai',N'Thực phẩm','',37000)
INSERT INTO HANGHOA VALUES('H013',N'Bột giặt',N'túi',N'Thực phẩm','',70000)
INSERT INTO HANGHOA VALUES('H014',N'Dầu gội ',N'hộp',N'Thực phẩm','',170000)
INSERT INTO HANGHOA VALUES('H015',N'Bàn chải',N'hộp',N'Đồ dùng hàng ngày','',19000)
INSERT INTO HANGHOA VALUES('H016',N'Pepsi',N'non',N'Đồ uống','',12000)
INSERT INTO HANGHOA VALUES('H017',N'Nước mắm ',N'chai',N'Thực phẩm','',34000)
INSERT INTO HANGHOA VALUES('H018',N'7 up',N'non',N'Đồ uống','',12000)
INSERT INTO HANGHOA VALUES('H019',N'Nước rửa chén',N'chai',N'Đồ dùng hàng ngày','',28000)
INSERT INTO HANGHOA VALUES('H020',N'Băng vệ sinh',N'gói',N'Đồ dùng hàng ngày','',100000)

INSERT INTO NHACUNGCAP VALUES('NCC01', N'Nhà sản xuất Hải Hùng',N'Hà Nội', 0123456789, N'haihung@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NCC02', N'Nhà sản xuất Tiền Phong',N'Hà Nội', 12345123, N'tienphong@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NCC03', N'Công ty TNHH Văn Quang',N'Hải Phòng', 09756789, N'vanquang@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NCC04', N'Công ty CocaCola',N'Hà Nội', 011223344, N'coca@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NCC05', N'Công ty UX',N'Hà Nội', 12343211, N'ux@gmail.com')


INSERT INTO NHANVIEN VALUES('NV01',N'Nguyễn Chí Hiếu', '2001/09/29' ,N'Liên Hiệp - Phúc Thọ - Hà Nội', 0974989174)
INSERT INTO NHANVIEN VALUES('NV02',N'Ngô Văn Khải', '2001/01/01' ,N'Đông Anh - Hà Nội', 0123456)
INSERT INTO NHANVIEN VALUES('NV03',N'Nguyễn Hông Tâm', '2001/12/16' ,N'Thái Thụy - Thái Bình', 0123678)
INSERT INTO NHANVIEN VALUES('NV04',N'Đỗ Hữu Hưng', '2001/02/02' ,N'Tam Hiệp - Phúc Thọ - Hà Nội', 0974989174)
INSERT INTO NHANVIEN VALUES('NV05',N'Trần Nhật Việt', '2001/03/03' ,N'Nam Định', 12345678)
	
INSERT INTO PHIEUNHAPHANG VALUES('P01','NCC01','2021/09/29','NV01')
INSERT INTO PHIEUNHAPHANG VALUES('P02','NCC02','2021/10/01','NV01')
INSERT INTO PHIEUNHAPHANG VALUES('P03','NCC03','2021/10/10','NV01')
INSERT INTO PHIEUNHAPHANG VALUES('P04','NCC04','2021/10/20','NV01')
INSERT INTO PHIEUNHAPHANG VALUES('P05','NCC05','2021/11/01','NV01')

INSERT INTO CT_PHIEUNHAPHANG VALUES('P01','H01',20,20000,N'VNĐ','2022/05/20')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P01','H02',100,8000,N'VNĐ','2023/01/01')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P01','H03',100,10000,N'VNĐ','2022/08/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P01','H04',120,5000,N'VNĐ','2022/03/21')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P01','H05',30,100000,N'VNĐ','2022/05/20')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P02','H06',100,5000,N'VNĐ','2022/09/30')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P02','H07',100,8000,N'VNĐ','2022/12/20')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P02','H08',10,300000,N'VNĐ','2025/05/20')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P02','H09',30,17000,N'VNĐ','2023/03/22')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P02','H010',10,25000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P03','H011',20,35000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P03','H012',20,25000,N'VNĐ','2023/02/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P03','H013',40,50000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P03','H014',30,150000,N'VNĐ','2023/07/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P03','H015',50,10000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P04','H016',50,10000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P04','H017',20,24000,N'VNĐ','2023/03/05')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P04','H018',50,10000,N'VNĐ','2023/02/09')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P04','H019',50,10000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P04','H020',30,80000,N'VNĐ','2023/09/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P05','H02',30,8000,N'VNĐ','2022/09/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P05','H07',30,8000,N'VNĐ','2023/01/10')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P05','H03',30,10000,N'VNĐ','2022/09/11')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P05','H09',30,17000,N'VNĐ','2022/07/20')
INSERT INTO CT_PHIEUNHAPHANG VALUES('P05','H010',30,25000,N'VNĐ','2023/09/10')

INSERT INTO CHUCVU VALUES('QL',N'Quản lý',10000000)
INSERT INTO CHUCVU VALUES('NV',N'Nhân viên',5000000)

INSERT INTO LOAIKHACHHANG VALUES('L01',N'VIP','')
INSERT INTO LOAIKHACHHANG VALUES('L02',N'Thường','')

INSERT INTO KHACHHANG VALUES('KH01','L01',N'Nguyễn Văn A',0123456,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH02','L02',N'Nguyễn Văn B',11223344,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH03','L01',N'Nguyễn Văn C',123123,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH04','L02',N'Nguyễn Văn D',456456,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH05','L01',N'Nguyễn Văn E',123456789,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH06','L02',N'Nguyễn Văn F',998877,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH07','L01',N'Nguyễn Văn G',665544,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH08','L02',N'Nguyễn Văn H',22446688,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH09','L01',N'Nguyễn Văn I',11335577,N'Hà Nội','','')
INSERT INTO KHACHHANG VALUES('KH10','L02',N'Nguyễn Văn K',00990099,N'Hà Nội','','')

INSERT INTO HOADON VALUES('HD01','NV02','KH01','','2021/10/10')
INSERT INTO HOADON VALUES('HD02','NV03','KH02','','2021/10/11')
INSERT INTO HOADON VALUES('HD03','NV05','KH03','','2021/10/12')
INSERT INTO HOADON VALUES('HD04','NV04','KH04','','2021/10/13')
INSERT INTO HOADON VALUES('HD05','NV01','KH05','','2021/10/14')
INSERT INTO HOADON VALUES('HD06','NV03','KH06','','2021/10/15')
INSERT INTO HOADON VALUES('HD07','NV02','KH07','','2021/10/16')
INSERT INTO HOADON VALUES('HD08','NV04','KH08','','2021/10/17')
INSERT INTO HOADON VALUES('HD09','NV04','KH09','','2021/10/18')
INSERT INTO HOADON VALUES('HD010','NV01','KH10','','2021/10/20')
INSERT INTO HOADON VALUES('HD011','NV05','KH01','','2021/10/10')

INSERT INTO KHUYENMAI VALUES('KM01',10)
INSERT INTO KHUYENMAI VALUES('KM02',15)
INSERT INTO KHUYENMAI VALUES('KM03',20)
INSERT INTO KHUYENMAI VALUES('KM04',25)
INSERT INTO KHUYENMAI VALUES('KM05',40)

INSERT INTO CT_KHUYENMAI VALUES('KM01','H01','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM02','H03','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM03','H05','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM04','H07','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM05','H09','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM01','H010','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM02','H012','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM03','H014','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM04','H016','2021/10/05','2021/12/31')
INSERT INTO CT_KHUYENMAI VALUES('KM05','H018','2021/10/05','2021/12/31')

INSERT INTO CHITIETHOADON VALUES('CTHD01','HD01','H01','KM01',2,'')
INSERT INTO CHITIETHOADON VALUES('CTHD02','HD01','H02',null,5,'')
INSERT INTO CHITIETHOADON VALUES('CTHD03','HD01','H03','KM02',1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD04','HD01','H04',null,2,'')
INSERT INTO CHITIETHOADON VALUES('CTHD05','HD01','H05','KM03',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD06','HD02','H06',null,6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD07','HD02','H07','KM04',10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD08','HD02','H08',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD09','HD02','H09','KM05',10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD10','HD02','H010','KM01',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD11','HD03','H011',null,3,'')
INSERT INTO CHITIETHOADON VALUES('CTHD12','HD03','H012','KM02',5,'')
INSERT INTO CHITIETHOADON VALUES('CTHD13','HD03','H013',null,7,'')
INSERT INTO CHITIETHOADON VALUES('CTHD14','HD03','H014','KM03',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD15','HD03','H015',null,8,'')
INSERT INTO CHITIETHOADON VALUES('CTHD16','HD04','H016','KM04',1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD17','HD04','H017',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD18','HD04','H018','KM05',1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD19','HD04','H019',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD20','HD04','H020',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD21','HD05','H01','KM01',2,'')
INSERT INTO CHITIETHOADON VALUES('CTHD22','HD05','H03','KM02',3,'')
INSERT INTO CHITIETHOADON VALUES('CTHD23','HD05','H05','KM03',4,'')
INSERT INTO CHITIETHOADON VALUES('CTHD24','HD05','H07','KM04',5,'')
INSERT INTO CHITIETHOADON VALUES('CTHD25','HD05','H09','KM05',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD26','HD06','H02',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD27','HD06','H04',null,1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD28','HD06','H06',null,2,'')
INSERT INTO CHITIETHOADON VALUES('CTHD29','HD06','H08',null,5,'')
INSERT INTO CHITIETHOADON VALUES('CTHD30','HD06','H010','KM05',10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD31','HD07','H010','KM05',10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD32','HD07','H011',null,10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD33','HD07','H01','KM01',10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD34','HD07','H019',null,10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD35','HD07','H020',null,10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD36','HD08','H02','KM02',1,'')
INSERT INTO CHITIETHOADON VALUES('CTHD37','HD08','H05',null,3,'')
INSERT INTO CHITIETHOADON VALUES('CTHD38','HD08','H08',null,5,'')
INSERT INTO CHITIETHOADON VALUES('CTHD39','HD08','H011',null,7,'')
INSERT INTO CHITIETHOADON VALUES('CTHD40','HD08','H014',null,12,'')
INSERT INTO CHITIETHOADON VALUES('CTHD41','HD09','H01','KM01',12,'')
INSERT INTO CHITIETHOADON VALUES('CTHD42','HD09','H06',null,10,'')
INSERT INTO CHITIETHOADON VALUES('CTHD43','HD09','H08',null,3,'')
INSERT INTO CHITIETHOADON VALUES('CTHD44','HD09','H09','KM05',8,'')
INSERT INTO CHITIETHOADON VALUES('CTHD45','HD09','H010','KM01',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD46','HD010','H03','KM02',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD47','HD010','H04',null,6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD48','HD010','H07','KM04',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD49','HD010','H011',null,6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD50','HD010','H016','KM04',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD51','HD011','H01','KM01',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD52','HD011','H02',null,6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD53','HD011','H05','KM03',6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD54','HD011','H08',null,6,'')
INSERT INTO CHITIETHOADON VALUES('CTHD55','HD011','H012','KM02',6,'')

INSERT INTO CT_CHUCVU VALUES('NV01','QL','2021/09/29',null)
INSERT INTO CT_CHUCVU VALUES('NV02','NV','2021/10/01',null)
INSERT INTO CT_CHUCVU VALUES('NV03','NV','2021/10/01',null)
INSERT INTO CT_CHUCVU VALUES('NV04','NV','2021/10/01',null)
INSERT INTO CT_CHUCVU VALUES('NV05','NV','2021/10/01',null)

